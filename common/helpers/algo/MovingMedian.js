"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

class MovingMedian {
  constructor(order = 5, initValue = 0) {
    this.order = order;
    this.stack = [];
    this.orderedStack = [];
    this.index = 0; // fill stack with initValue

    for (let i = 0; i < this.order; i++) {
      this.stack[i] = initValue;
    }
  }

  process(value) {
    this.stack[this.index] = value;
    this.index = (this.index + 1) % this.order;

    for (let i = 0; i < this.order; i++) {
      this.orderedStack[i] = this.stack[i];
    }

    this.orderedStack.sort((a, b) => a - b);
    let median = 0;

    if (this.order > 1) {
      if (this.order % 2 === 1) {
        // odd order
        median = this.orderedStack[(this.order - 1) / 2];
      } else {
        // even order
        median = (this.orderedStack[this.order / 2 - 1] + this.orderedStack[this.order / 2]) / 2;
      }
    } else {
      median = value;
    }

    return median;
  }

}

var _default = MovingMedian;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vaGVscGVycy9hbGdvL01vdmluZ01lZGlhbi5qcyJdLCJuYW1lcyI6WyJNb3ZpbmdNZWRpYW4iLCJjb25zdHJ1Y3RvciIsIm9yZGVyIiwiaW5pdFZhbHVlIiwic3RhY2siLCJvcmRlcmVkU3RhY2siLCJpbmRleCIsImkiLCJwcm9jZXNzIiwidmFsdWUiLCJzb3J0IiwiYSIsImIiLCJtZWRpYW4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFDQSxNQUFNQSxZQUFOLENBQW1CO0FBQ2pCQyxFQUFBQSxXQUFXLENBQUNDLEtBQUssR0FBRyxDQUFULEVBQVlDLFNBQVMsR0FBRyxDQUF4QixFQUEyQjtBQUNwQyxTQUFLRCxLQUFMLEdBQWFBLEtBQWI7QUFDQSxTQUFLRSxLQUFMLEdBQWEsRUFBYjtBQUNBLFNBQUtDLFlBQUwsR0FBb0IsRUFBcEI7QUFDQSxTQUFLQyxLQUFMLEdBQWEsQ0FBYixDQUpvQyxDQU1wQzs7QUFDQSxTQUFLLElBQUlDLENBQUMsR0FBRyxDQUFiLEVBQWdCQSxDQUFDLEdBQUcsS0FBS0wsS0FBekIsRUFBZ0NLLENBQUMsRUFBakMsRUFBcUM7QUFDbkMsV0FBS0gsS0FBTCxDQUFXRyxDQUFYLElBQWdCSixTQUFoQjtBQUNEO0FBQ0Y7O0FBRURLLEVBQUFBLE9BQU8sQ0FBQ0MsS0FBRCxFQUFRO0FBQ2IsU0FBS0wsS0FBTCxDQUFXLEtBQUtFLEtBQWhCLElBQXlCRyxLQUF6QjtBQUNBLFNBQUtILEtBQUwsR0FBYSxDQUFDLEtBQUtBLEtBQUwsR0FBYSxDQUFkLElBQW1CLEtBQUtKLEtBQXJDOztBQUVBLFNBQUssSUFBSUssQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLTCxLQUF6QixFQUFnQ0ssQ0FBQyxFQUFqQyxFQUFxQztBQUNuQyxXQUFLRixZQUFMLENBQWtCRSxDQUFsQixJQUF1QixLQUFLSCxLQUFMLENBQVdHLENBQVgsQ0FBdkI7QUFDRDs7QUFFRCxTQUFLRixZQUFMLENBQWtCSyxJQUFsQixDQUF1QixDQUFDQyxDQUFELEVBQUlDLENBQUosS0FBVUQsQ0FBQyxHQUFHQyxDQUFyQztBQUVBLFFBQUlDLE1BQU0sR0FBRyxDQUFiOztBQUVBLFFBQUksS0FBS1gsS0FBTCxHQUFhLENBQWpCLEVBQW9CO0FBQ2xCLFVBQUksS0FBS0EsS0FBTCxHQUFhLENBQWIsS0FBbUIsQ0FBdkIsRUFBMEI7QUFBRTtBQUMxQlcsUUFBQUEsTUFBTSxHQUFHLEtBQUtSLFlBQUwsQ0FBa0IsQ0FBQyxLQUFLSCxLQUFMLEdBQWEsQ0FBZCxJQUFtQixDQUFyQyxDQUFUO0FBQ0QsT0FGRCxNQUVPO0FBQUU7QUFDUFcsUUFBQUEsTUFBTSxHQUFHLENBQUMsS0FBS1IsWUFBTCxDQUFtQixLQUFLSCxLQUFMLEdBQWEsQ0FBZCxHQUFtQixDQUFyQyxJQUEwQyxLQUFLRyxZQUFMLENBQWtCLEtBQUtILEtBQUwsR0FBYyxDQUFoQyxDQUEzQyxJQUFpRixDQUExRjtBQUNEO0FBQ0YsS0FORCxNQU1PO0FBQ0xXLE1BQUFBLE1BQU0sR0FBR0osS0FBVDtBQUNEOztBQUVELFdBQU9JLE1BQVA7QUFDRDs7QUFwQ2dCOztlQXVDSmIsWSIsInNvdXJjZXNDb250ZW50IjpbIlxuY2xhc3MgTW92aW5nTWVkaWFuIHtcbiAgY29uc3RydWN0b3Iob3JkZXIgPSA1LCBpbml0VmFsdWUgPSAwKSB7XG4gICAgdGhpcy5vcmRlciA9IG9yZGVyO1xuICAgIHRoaXMuc3RhY2sgPSBbXTtcbiAgICB0aGlzLm9yZGVyZWRTdGFjayA9IFtdO1xuICAgIHRoaXMuaW5kZXggPSAwO1xuXG4gICAgLy8gZmlsbCBzdGFjayB3aXRoIGluaXRWYWx1ZVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcmRlcjsgaSsrKSB7XG4gICAgICB0aGlzLnN0YWNrW2ldID0gaW5pdFZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIHByb2Nlc3ModmFsdWUpIHtcbiAgICB0aGlzLnN0YWNrW3RoaXMuaW5kZXhdID0gdmFsdWU7XG4gICAgdGhpcy5pbmRleCA9ICh0aGlzLmluZGV4ICsgMSkgJSB0aGlzLm9yZGVyO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9yZGVyOyBpKyspIHtcbiAgICAgIHRoaXMub3JkZXJlZFN0YWNrW2ldID0gdGhpcy5zdGFja1tpXTtcbiAgICB9XG5cbiAgICB0aGlzLm9yZGVyZWRTdGFjay5zb3J0KChhLCBiKSA9PiBhIC0gYik7XG5cbiAgICBsZXQgbWVkaWFuID0gMDtcblxuICAgIGlmICh0aGlzLm9yZGVyID4gMSkge1xuICAgICAgaWYgKHRoaXMub3JkZXIgJSAyID09PSAxKSB7IC8vIG9kZCBvcmRlclxuICAgICAgICBtZWRpYW4gPSB0aGlzLm9yZGVyZWRTdGFja1sodGhpcy5vcmRlciAtIDEpIC8gMl07XG4gICAgICB9IGVsc2UgeyAvLyBldmVuIG9yZGVyXG4gICAgICAgIG1lZGlhbiA9ICh0aGlzLm9yZGVyZWRTdGFja1sodGhpcy5vcmRlciAvIDIpIC0gMV0gKyB0aGlzLm9yZGVyZWRTdGFja1t0aGlzLm9yZGVyICAvIDJdKSAvIDI7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lZGlhbiA9IHZhbHVlO1xuICAgIH1cblxuICAgIHJldHVybiBtZWRpYW47XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTW92aW5nTWVkaWFuO1xuIl19