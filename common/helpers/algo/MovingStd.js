"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

class MovingStd {
  constructor(order = 5, initValue = 0) {
    this.order = order;
    this.stack = [];
    this.index = 0; // fill stack with zeros

    for (let i = 0; i < this.order; i++) {
      this.stack[i] = initValue;
    }
  }

  process(value) {
    if (this.order < 2) {
      return 0;
    }

    this.stack[this.index] = value;
    this.index = (this.index + 1) % this.order; //const std = math.std(this.stack);

    let sum = 0;
    let sumSquare = 0;

    for (let i = 0; i < this.order; i++) {
      sum += this.stack[i];
      sumSquare += Math.pow(this.stack[i], 2);
    }

    const std = Math.pow((this.order * sum - sumSquare) / (this.order * (this.order - 1)), 0.5);
    return std;
  }

}

var _default = MovingStd;
exports.default = _default;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21tb24vaGVscGVycy9hbGdvL01vdmluZ1N0ZC5qcyJdLCJuYW1lcyI6WyJNb3ZpbmdTdGQiLCJjb25zdHJ1Y3RvciIsIm9yZGVyIiwiaW5pdFZhbHVlIiwic3RhY2siLCJpbmRleCIsImkiLCJwcm9jZXNzIiwidmFsdWUiLCJzdW0iLCJzdW1TcXVhcmUiLCJNYXRoIiwicG93Iiwic3RkIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsTUFBTUEsU0FBTixDQUFnQjtBQUNkQyxFQUFBQSxXQUFXLENBQUNDLEtBQUssR0FBRyxDQUFULEVBQVlDLFNBQVMsR0FBRyxDQUF4QixFQUEyQjtBQUNwQyxTQUFLRCxLQUFMLEdBQWFBLEtBQWI7QUFDQSxTQUFLRSxLQUFMLEdBQWEsRUFBYjtBQUNBLFNBQUtDLEtBQUwsR0FBYSxDQUFiLENBSG9DLENBS3BDOztBQUNBLFNBQUssSUFBSUMsQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLSixLQUF6QixFQUFnQ0ksQ0FBQyxFQUFqQyxFQUFxQztBQUNuQyxXQUFLRixLQUFMLENBQVdFLENBQVgsSUFBZ0JILFNBQWhCO0FBQ0Q7QUFDRjs7QUFHREksRUFBQUEsT0FBTyxDQUFDQyxLQUFELEVBQVE7QUFDYixRQUFJLEtBQUtOLEtBQUwsR0FBYSxDQUFqQixFQUFtQjtBQUNqQixhQUFPLENBQVA7QUFDRDs7QUFFRCxTQUFLRSxLQUFMLENBQVcsS0FBS0MsS0FBaEIsSUFBeUJHLEtBQXpCO0FBQ0EsU0FBS0gsS0FBTCxHQUFhLENBQUMsS0FBS0EsS0FBTCxHQUFhLENBQWQsSUFBbUIsS0FBS0gsS0FBckMsQ0FOYSxDQVFiOztBQUNBLFFBQUlPLEdBQUcsR0FBRyxDQUFWO0FBQ0EsUUFBSUMsU0FBUyxHQUFHLENBQWhCOztBQUVBLFNBQUssSUFBSUosQ0FBQyxHQUFHLENBQWIsRUFBZ0JBLENBQUMsR0FBRyxLQUFLSixLQUF6QixFQUFnQ0ksQ0FBQyxFQUFqQyxFQUFxQztBQUNuQ0csTUFBQUEsR0FBRyxJQUFJLEtBQUtMLEtBQUwsQ0FBV0UsQ0FBWCxDQUFQO0FBQ0FJLE1BQUFBLFNBQVMsSUFBSUMsSUFBSSxDQUFDQyxHQUFMLENBQVMsS0FBS1IsS0FBTCxDQUFXRSxDQUFYLENBQVQsRUFBdUIsQ0FBdkIsQ0FBYjtBQUNEOztBQUVELFVBQU1PLEdBQUcsR0FBR0YsSUFBSSxDQUFDQyxHQUFMLENBQVUsQ0FBQyxLQUFLVixLQUFMLEdBQVdPLEdBQVgsR0FBaUJDLFNBQWxCLEtBQWdDLEtBQUtSLEtBQUwsSUFBWSxLQUFLQSxLQUFMLEdBQVcsQ0FBdkIsQ0FBaEMsQ0FBVixFQUFzRSxHQUF0RSxDQUFaO0FBRUEsV0FBT1csR0FBUDtBQUNEOztBQWpDYTs7ZUFvQ0RiLFMiLCJzb3VyY2VzQ29udGVudCI6WyJjbGFzcyBNb3ZpbmdTdGQge1xuICBjb25zdHJ1Y3RvcihvcmRlciA9IDUsIGluaXRWYWx1ZSA9IDApIHtcbiAgICB0aGlzLm9yZGVyID0gb3JkZXI7XG4gICAgdGhpcy5zdGFjayA9IFtdO1xuICAgIHRoaXMuaW5kZXggPSAwO1xuXG4gICAgLy8gZmlsbCBzdGFjayB3aXRoIHplcm9zXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLm9yZGVyOyBpKyspIHtcbiAgICAgIHRoaXMuc3RhY2tbaV0gPSBpbml0VmFsdWU7XG4gICAgfVxuICB9XG5cblxuICBwcm9jZXNzKHZhbHVlKSB7XG4gICAgaWYgKHRoaXMub3JkZXIgPCAyKXtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cblxuICAgIHRoaXMuc3RhY2tbdGhpcy5pbmRleF0gPSB2YWx1ZTtcbiAgICB0aGlzLmluZGV4ID0gKHRoaXMuaW5kZXggKyAxKSAlIHRoaXMub3JkZXI7XG4gXG4gICAgLy9jb25zdCBzdGQgPSBtYXRoLnN0ZCh0aGlzLnN0YWNrKTtcbiAgICBsZXQgc3VtID0gMDtcbiAgICBsZXQgc3VtU3F1YXJlID0gMDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5vcmRlcjsgaSsrKSB7XG4gICAgICBzdW0gKz0gdGhpcy5zdGFja1tpXTtcbiAgICAgIHN1bVNxdWFyZSArPSBNYXRoLnBvdyh0aGlzLnN0YWNrW2ldLDIpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0ZCA9IE1hdGgucG93KCgodGhpcy5vcmRlcipzdW0gLSBzdW1TcXVhcmUpIC8gKHRoaXMub3JkZXIqKHRoaXMub3JkZXItMSkpKSwwLjUpOyBcbiAgICBcbiAgICByZXR1cm4gc3RkO1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IE1vdmluZ1N0ZDtcbiJdfQ==